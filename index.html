<!DOCTYPE html>
<html>
<head>
  <title>URL Reformatter</title>
  <style>
    table {
      border-collapse: collapse;
    }
    table, th, td {
      border: 1px solid black;
    }
    th, td {
      padding: 8px;
    }
    th {
      background-color: lightgray;
    }
    a {
      text-decoration: none;
    }
    .green {
      background-color: green;
    }
    .red {
      background-color: red;
    }
  </style>
  <script>
    var urls = [];
    var names = [];
    var currentIndex = 0;

    function generateURLs() {
      var urlInput = document.getElementById("urlInput").value;
      var nameInput = document.getElementById("nameInput").value;

      // Reformat URL
      var url = urlInput.trim();
      var number = parseInt(url.substring(url.lastIndexOf("/") + 1));
      var newNumber = number + 999;
      var newURL = url.replace(number, newNumber);

      // Store URL and name
      urls.push(newURL);
      names.push(nameInput);

      // Clear input fields
      document.getElementById("urlInput").value = "";
      document.getElementById("nameInput").value = "";

      // Display table
      displayTable();
    }

    function displayTable() {
      var table = document.getElementById("urlTable");
      table.innerHTML = "";

      var headerRow = table.insertRow();
      var nameHeader = headerRow.insertCell();
      nameHeader.innerHTML = "Name";
      var urlHeader = headerRow.insertCell();
      urlHeader.innerHTML = "URL";

      for (var i = 0; i < urls.length; i++) {
        var row = table.insertRow();

        var nameCell = row.insertCell();
        nameCell.innerHTML = names[i];

        var urlCell = row.insertCell();
        var link = document.createElement("a");
        link.href = urls[i];
        link.target = "_blank";
        link.innerHTML = urls[i];
        urlCell.appendChild(link);
      }
    }

    function openNextPopup() {
      if (currentIndex < urls.length) {
        var url = urls[currentIndex];
        var name = names[currentIndex];
        currentIndex++;

        var popup = window.open(url, name, "height=600,width=800");
        popup.onload = function() {
          popup.scroll(0, 200); // Scroll to the second page (adjust the value as needed)
        };

        var promptContainer = document.getElementById("promptContainer");
        promptContainer.style.display = "block";
        document.getElementById("promptTitle").innerHTML = name;
      }
    }

    function closePopup(button) {
      var promptContainer = document.getElementById("promptContainer");
      promptContainer.style.display = "none";

      var link = document.getElementById("urlTable").rows[currentIndex].cells[1].getElementsByTagName("a")[0];
      if (button === "yes") {
        link.className = "green";
      } else if (button === "no") {
        link.className = "red";
      } else {
        link.className = "";
      }

      openNextPopup();
    }
  </script>
</head>
<body>
  <h1>URL Reformatter</h1>
  <label for="urlInput">URL:</label>
  <input type="text" id="urlInput"><br>
  <label for="nameInput">Name:</label>
  <input type="text" id="nameInput"><br>
  <button onclick="generateURLs()">Generate</button>
  <button onclick="openNextPopup()">Start Viewing</button>

  <table id="urlTable"></table>

  <div id="promptContainer" style="display: none;">
    <h2 id="promptTitle"></h2>
    <button onclick="closePopup('yes')">Yes</button>
    <button onclick="closePopup('no')">No</button>
    <button onclick="closePopup('reset')">Reset</button>
  </div>
</body>
</html>
